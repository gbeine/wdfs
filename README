
abstract:
  wdfs is a webdav filesystem with special features for accessing subversion
  repositories. it is based on fuse v2.3+ and neon v0.24.7+.


author and homepage of wdfs:
  (c) 2005 jens m. noedler, noedler@web.de, http://noedler.de/projekte/wdfs/


features:
 - generic webdav filesystem with https-support
 - support for file locking (3 different modes)
 - access to all revisions of a webdav exported subversion repository 
 - versioning filesystem for autoversioning enabled subversion repositories


dependencies:
 - fuse (filesystem in userspace) v2.3 or later (http://fuse.sourceforge.net/)
 - neon webdav library v0.24.7 or later (http://www.webdav.org/neon/)


installation:
  tar xfz wdfs-1.x.x.tar.gz
  cd wdfs-1.x.x
  ./configure && make && make install


limitations of this implementation:
 - wdfs is not (yet) multithread safe. it always uses fuse single thread mode.
 - svn mode: only up to 2^31-1 revisions can be accessed, 
   because "latest_revision" is an integer variable.
 - svn mode: if a subdirectory of a subversion repository is mounted, the 
   "svn_basedir" shows the content of the repository root and not only the 
   content of the mounted subdir. [caused by svn_get_remotepath()]


limitations of wdfs, caused by other limitations:
 - wdfs supports only utf-8 encoded filenames and directory names.
   use utf8 capable applications or pure ascii (no iso8859!) encoded names.
   (limitation caused by subversion, which stores all data utf-8 encoded)
 - wdfs does not support setting file attributes with utime() or utimes()
   (used by "touch file -m -t 200601010000"). see wdfs_setattr() for details.
   (limitation caused by webdav rfc 2518)
 - wdfs does not support ftruncate(), beacause of a race condition between
   wdfs_release() and wdfs_truncate(). an example:
      // wdfs_open() get the file to file->fh (filehandle)
      int fh = open(filename, O_WRONLY);
      // wdfs_write() writes to file->fh
      write(fh, string, strlen(string));
      // wdfs_truncate() gets the file, truncates it and puts it back
      ftruncate(fh, 10);
      // wdfs_release() will be called and will overwrite wdfs_truncate()'s
      // changes, because wdfs_open(), wdfs_read(), wdfs_write() and
      // wdfs_release() deal with file->fh. wdfs_truncate() cannot do so.
      close(fh);
   more infos: http://sourceforge.net/mailarchive/message.php?msg_id=12662730
   conclusion: use truncate() instead of ftruncate().
   (limitation caused by fuse, linux kernel and myself)
   (will be fixed when linux kernel 2.6.15 and fuse 2.5 are available!)


source code conventions:
 - variable name "remotepath" is used for WebDAV access (/remote/dir/file)
 - variable name "localpath" is used for local access (/file)
 - variable name "ret" is used for the return values of methods
 - methods, structs, etc. starting with "ne_" are part of the neon library
 - error output: 
    - "## " prefix for warnings and error messages
 - debug output:
    - ">> " prefix for fuse callback methods
    - "** " prefix for cache related messages (no errors)
    - "++ " prefix for locking related messages (no errors)


license:
  wdfs is distributed under the terms of the gnu general public license.
  see file COPYING for details.


acknowledgements:
  milos szeredi for developing fuse and the active members of the 
  fuse-devel mailing list for helping me with fuse and wdfs.

